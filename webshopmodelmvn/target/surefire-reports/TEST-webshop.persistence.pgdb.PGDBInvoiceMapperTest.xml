<?xml version="1.0" encoding="UTF-8"?>
<testsuite name="webshop.persistence.pgdb.PGDBInvoiceMapperTest" time="0.058" tests="6" errors="6" skipped="0" failures="0">
  <properties>
    <property name="java.runtime.name" value="Java(TM) SE Runtime Environment"/>
    <property name="sun.boot.library.path" value="/usr/lib/jvm/java-8-oracle/jre/lib/amd64"/>
    <property name="java.vm.version" value="25.151-b12"/>
    <property name="java.vm.vendor" value="Oracle Corporation"/>
    <property name="maven.multiModuleProjectDirectory" value="/home/hom/sebi/sen1/trunk/45_assessment/examprojects/webshop2015b/code/webshopmodelmvn"/>
    <property name="java.vendor.url" value="http://java.oracle.com/"/>
    <property name="path.separator" value=":"/>
    <property name="guice.disable.misplaced.annotation.check" value="true"/>
    <property name="java.vm.name" value="Java HotSpot(TM) 64-Bit Server VM"/>
    <property name="file.encoding.pkg" value="sun.io"/>
    <property name="user.country" value="US"/>
    <property name="sun.java.launcher" value="SUN_STANDARD"/>
    <property name="sun.os.patch.level" value="unknown"/>
    <property name="java.vm.specification.name" value="Java Virtual Machine Specification"/>
    <property name="user.dir" value="/home/hom/sebi/sen1/trunk/45_assessment/examprojects/webshop2015b/code/webshopmodelmvn"/>
    <property name="java.runtime.version" value="1.8.0_151-b12"/>
    <property name="java.awt.graphicsenv" value="sun.awt.X11GraphicsEnvironment"/>
    <property name="java.endorsed.dirs" value="/usr/lib/jvm/java-8-oracle/jre/lib/endorsed"/>
    <property name="os.arch" value="amd64"/>
    <property name="java.io.tmpdir" value="/tmp"/>
    <property name="line.separator" value="&#10;"/>
    <property name="java.vm.specification.vendor" value="Oracle Corporation"/>
    <property name="os.name" value="Linux"/>
    <property name="classworlds.conf" value="/usr/share/maven/bin/m2.conf"/>
    <property name="sun.jnu.encoding" value="UTF-8"/>
    <property name="java.library.path" value="/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib"/>
    <property name="java.specification.name" value="Java Platform API Specification"/>
    <property name="java.class.version" value="52.0"/>
    <property name="sun.management.compiler" value="HotSpot 64-Bit Tiered Compilers"/>
    <property name="os.version" value="4.10.0-38-generic"/>
    <property name="user.home" value="/home/hom"/>
    <property name="user.timezone" value="Europe/Amsterdam"/>
    <property name="java.awt.printerjob" value="sun.print.PSPrinterJob"/>
    <property name="file.encoding" value="UTF-8"/>
    <property name="java.specification.version" value="1.8"/>
    <property name="user.name" value="hom"/>
    <property name="java.class.path" value="/usr/share/maven/boot/plexus-classworlds-2.x.jar"/>
    <property name="java.vm.specification.version" value="1.8"/>
    <property name="sun.arch.data.model" value="64"/>
    <property name="java.home" value="/usr/lib/jvm/java-8-oracle/jre"/>
    <property name="sun.java.command" value="org.codehaus.plexus.classworlds.launcher.Launcher install"/>
    <property name="java.specification.vendor" value="Oracle Corporation"/>
    <property name="user.language" value="en"/>
    <property name="awt.toolkit" value="sun.awt.X11.XToolkit"/>
    <property name="java.vm.info" value="mixed mode"/>
    <property name="java.version" value="1.8.0_151"/>
    <property name="java.ext.dirs" value="/usr/lib/jvm/java-8-oracle/jre/lib/ext:/usr/java/packages/lib/ext"/>
    <property name="securerandom.source" value="file:/dev/./urandom"/>
    <property name="sun.boot.class.path" value="/usr/lib/jvm/java-8-oracle/jre/lib/resources.jar:/usr/lib/jvm/java-8-oracle/jre/lib/rt.jar:/usr/lib/jvm/java-8-oracle/jre/lib/sunrsasign.jar:/usr/lib/jvm/java-8-oracle/jre/lib/jsse.jar:/usr/lib/jvm/java-8-oracle/jre/lib/jce.jar:/usr/lib/jvm/java-8-oracle/jre/lib/charsets.jar:/usr/lib/jvm/java-8-oracle/jre/lib/jfr.jar:/usr/lib/jvm/java-8-oracle/jre/classes"/>
    <property name="java.vendor" value="Oracle Corporation"/>
    <property name="maven.home" value="/usr/share/maven"/>
    <property name="file.separator" value="/"/>
    <property name="java.vendor.url.bug" value="http://bugreport.sun.com/bugreport/"/>
    <property name="sun.cpu.endian" value="little"/>
    <property name="sun.io.unicode.encoding" value="UnicodeLittle"/>
    <property name="sun.desktop" value="gnome"/>
    <property name="sun.cpu.isalist" value=""/>
  </properties>
  <testcase name="testGet" classname="webshop.persistence.pgdb.PGDBInvoiceMapperTest" time="0.022">
    <error message="doInsert failed with query &quot;insert into test_cart (product_id,owner_session) select ?,? where not exists (select 1 from test_cart where product_id =? and owner_session=?)&quot; with args [0, 1, 0, 1]" type="webshop.persistence.PersistenceException">webshop.persistence.PersistenceException: doInsert failed with query "insert into test_cart (product_id,owner_session) select ?,? where not exists (select 1 from test_cart where product_id =? and owner_session=?)" with args [0, 1, 0, 1]
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2477)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2190)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:300)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:428)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:354)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:169)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:136)
	at webshop.persistence.pgdb.QueryHelper.doInsert(QueryHelper.java:231)
	at webshop.persistence.pgdb.QueryHelper.doInsert(QueryHelper.java:209)
	at webshop.persistence.pgdb.PGDBProductContainer.merge(PGDBProductContainer.java:156)
	at webshop.persistence.pgdb.PGDBProductContainer.merge(PGDBProductContainer.java:113)
	at webshop.persistence.pgdb.PGDBInvoiceMapperTest.setUp(PGDBInvoiceMapperTest.java:63)
</error>
    <system-out><![CDATA[pst = drop table if exists yuk 
ex = webshop.persistence.PersistenceException: doSelect failed with query "drop table if exists yuk " with args []
script = -- this table servers for tests only.

drop table if exists test_inventory cascade;
drop table if exists test_cart cascade;
drop table if exists test_invoice cascade;
create table test_inventory  (
    product_id bigint references products(product_id) primary key,
    quantity int NOT NULL CHECK (quantity >= 0) default 0,
    date_creation timestamp default now()::timestamp,
    date_update timestamp default now()::timestamp,
    owner_session bigint not null default 0
)  without oids;
alter table test_inventory owner to exam;

insert into test_inventory 
       (product_id, quantity, date_creation, date_update,owner_session)
       values
       (1,0,default,default,0),
       (2,5,default,default,0),
       (3,100,default,default,0);

create table test_cart (
    product_id bigint references products(product_id),
    quantity int NOT NULL CHECK (quantity >= 0) default 0,
    date_creation timestamp default now()::timestamp,
    date_update timestamp default now()::timestamp,
    owner_session bigint not null default 0,
    primary key(product_id, owner_session)
);
alter table test_inventory owner to exam;
alter table test_cart owner to exam;

-- this table servers for tests only.

drop table if exists test_inventory cascade;
drop table if exists test_cart cascade;
drop table if exists test_invoice cascade;
create table test_inventory  (
    product_id bigint references products(product_id) primary key,
    quantity int NOT NULL CHECK (quantity >= 0) default 0,
    date_creation timestamp default now()::timestamp,
    date_update timestamp default now()::timestamp,
    owner_session bigint not null default 0
)  without oids;
alter table test_inventory owner to exam;

insert into test_inventory 
       (product_id, quantity, date_creation, date_update,owner_session)
       values
       (1,0,default,default,0),
       (2,5,default,default,0),
       (3,100,default,default,0);

create table test_cart (
    product_id bigint references products(product_id),
    quantity int NOT NULL CHECK (quantity >= 0) default 0,
    date_creation timestamp default now()::timestamp,
    date_update timestamp default now()::timestamp,
    owner_session bigint not null default 0,
    primary key(product_id, owner_session)
);
alter table test_inventory owner to exam;
alter table test_cart owner to exam;
;

script = -- this table servers for tests only.
begin work;
drop table if exists test_invoice;
drop table if exists test_invoice_line;
drop sequence if exists test_invoice_invoice_id_seq;
drop sequence if exists test_invoice_line_invoice_line_id_seq;
create sequence test_invoice_invoice_id_seq;
create sequence test_invoice_line_invoice_line_id_seq;

create table test_invoice as select * from invoice where false;
create table test_invoice_line as select * from invoice_line where false;

alter table test_invoice alter column invoice_id set default nextval('test_invoice_invoice_id_seq'::regclass);
alter table test_invoice_line alter column invoice_line_id set default nextval('test_invoice_line_invoice_line_id_seq'::regclass);

alter table test_invoice add constraint test_invoice_pk primary key(invoice_id);
alter table test_invoice_line add constraint test_invoice_line_fk1 foreign key(invoice_id) references test_invoice(invoice_id);
alter table test_invoice_line owner to exam;
alter table test_invoice owner to exam;
alter sequence test_invoice_invoice_id_seq owner to exam;
alter sequence test_invoice_line_invoice_line_id_seq owner to exam;
commit;

-- this table servers for tests only.
begin work;
drop table if exists test_invoice;
drop table if exists test_invoice_line;
drop sequence if exists test_invoice_invoice_id_seq;
drop sequence if exists test_invoice_line_invoice_line_id_seq;
create sequence test_invoice_invoice_id_seq;
create sequence test_invoice_line_invoice_line_id_seq;

create table test_invoice as select * from invoice where false;
create table test_invoice_line as select * from invoice_line where false;

alter table test_invoice alter column invoice_id set default nextval('test_invoice_invoice_id_seq'::regclass);
alter table test_invoice_line alter column invoice_line_id set default nextval('test_invoice_line_invoice_line_id_seq'::regclass);

alter table test_invoice add constraint test_invoice_pk primary key(invoice_id);
alter table test_invoice_line add constraint test_invoice_line_fk1 foreign key(invoice_id) references test_invoice(invoice_id);
alter table test_invoice_line owner to exam;
alter table test_invoice owner to exam;
alter sequence test_invoice_invoice_id_seq owner to exam;
alter sequence test_invoice_line_invoice_line_id_seq owner to exam;
commit;
;

pst = select * from products where 'TRUE' order by product_id
 found p = Product{id=1, description=The Davinci code, vatLevel=HIGH, price=2500}
 found p = Product{id=2, description=Inferno, vatLevel=HIGH, price=3000}
 found p = Product{id=3, description=Battleship, vatLevel=HIGH, price=2000}
 found p = Product{id=4, description=Crisps, vatLevel=LOW, price=100}
 found p = Product{id=5, description=Coca Cola, vatLevel=LOW, price=250}
 found p = Product{id=6, description=Kingsman: The secret Service, vatLevel=HIGH, price=2500}
 found p = Product{id=7, description=Popcorn, vatLevel=LOW, price=120}
 found p = Product{id=8, description=Twix, vatLevel=LOW, price=90}
 found p = Product{id=0, description=Warsteiner, vatLevel=HIGH, price=98}
]]></system-out>
    <system-err><![CDATA[Nov 08, 2017 4:00:57 PM webshop.persistence.pgdb.QueryHelper doInsert
SEVERE: doInsert failed with query "insert into test_cart (product_id,owner_session) select ?,? where not exists (select 1 from test_cart where product_id =? and owner_session=?)" with args [0, 1, 0, 1]
org.postgresql.util.PSQLException: ERROR: insert or update on table "test_cart" violates foreign key constraint "test_cart_product_id_fkey"
  Detail: Key (product_id)=(0) is not present in table "products".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2477)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2190)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:300)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:428)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:354)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:169)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:136)
	at webshop.persistence.pgdb.QueryHelper.doInsert(QueryHelper.java:231)
	at webshop.persistence.pgdb.QueryHelper.doInsert(QueryHelper.java:209)
	at webshop.persistence.pgdb.PGDBProductContainer.merge(PGDBProductContainer.java:156)
	at webshop.persistence.pgdb.PGDBProductContainer.merge(PGDBProductContainer.java:113)
	at webshop.persistence.pgdb.PGDBInvoiceMapperTest.setUp(PGDBInvoiceMapperTest.java:63)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)

]]></system-err>
  </testcase>
  <testcase name="testLoad" classname="webshop.persistence.pgdb.PGDBInvoiceMapperTest" time="0.009">
    <error message="doInsert failed with query &quot;insert into test_cart (product_id,owner_session) select ?,? where not exists (select 1 from test_cart where product_id =? and owner_session=?)&quot; with args [0, 1, 0, 1]" type="webshop.persistence.PersistenceException">webshop.persistence.PersistenceException: doInsert failed with query "insert into test_cart (product_id,owner_session) select ?,? where not exists (select 1 from test_cart where product_id =? and owner_session=?)" with args [0, 1, 0, 1]
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2477)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2190)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:300)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:428)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:354)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:169)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:136)
	at webshop.persistence.pgdb.QueryHelper.doInsert(QueryHelper.java:231)
	at webshop.persistence.pgdb.QueryHelper.doInsert(QueryHelper.java:209)
	at webshop.persistence.pgdb.PGDBProductContainer.merge(PGDBProductContainer.java:156)
	at webshop.persistence.pgdb.PGDBProductContainer.merge(PGDBProductContainer.java:113)
	at webshop.persistence.pgdb.PGDBInvoiceMapperTest.setUp(PGDBInvoiceMapperTest.java:63)
</error>
    <system-err><![CDATA[Nov 08, 2017 4:00:57 PM webshop.persistence.pgdb.QueryHelper doInsert
SEVERE: doInsert failed with query "insert into test_cart (product_id,owner_session) select ?,? where not exists (select 1 from test_cart where product_id =? and owner_session=?)" with args [0, 1, 0, 1]
org.postgresql.util.PSQLException: ERROR: insert or update on table "test_cart" violates foreign key constraint "test_cart_product_id_fkey"
  Detail: Key (product_id)=(0) is not present in table "products".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2477)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2190)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:300)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:428)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:354)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:169)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:136)
	at webshop.persistence.pgdb.QueryHelper.doInsert(QueryHelper.java:231)
	at webshop.persistence.pgdb.QueryHelper.doInsert(QueryHelper.java:209)
	at webshop.persistence.pgdb.PGDBProductContainer.merge(PGDBProductContainer.java:156)
	at webshop.persistence.pgdb.PGDBProductContainer.merge(PGDBProductContainer.java:113)
	at webshop.persistence.pgdb.PGDBInvoiceMapperTest.setUp(PGDBInvoiceMapperTest.java:63)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)

]]></system-err>
  </testcase>
  <testcase name="testSaveAndLoad" classname="webshop.persistence.pgdb.PGDBInvoiceMapperTest" time="0.007">
    <error message="doInsert failed with query &quot;insert into test_cart (product_id,owner_session) select ?,? where not exists (select 1 from test_cart where product_id =? and owner_session=?)&quot; with args [0, 1, 0, 1]" type="webshop.persistence.PersistenceException">webshop.persistence.PersistenceException: doInsert failed with query "insert into test_cart (product_id,owner_session) select ?,? where not exists (select 1 from test_cart where product_id =? and owner_session=?)" with args [0, 1, 0, 1]
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2477)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2190)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:300)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:428)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:354)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:169)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:136)
	at webshop.persistence.pgdb.QueryHelper.doInsert(QueryHelper.java:231)
	at webshop.persistence.pgdb.QueryHelper.doInsert(QueryHelper.java:209)
	at webshop.persistence.pgdb.PGDBProductContainer.merge(PGDBProductContainer.java:156)
	at webshop.persistence.pgdb.PGDBProductContainer.merge(PGDBProductContainer.java:113)
	at webshop.persistence.pgdb.PGDBInvoiceMapperTest.setUp(PGDBInvoiceMapperTest.java:63)
</error>
    <system-err><![CDATA[Nov 08, 2017 4:00:57 PM webshop.persistence.pgdb.QueryHelper doInsert
SEVERE: doInsert failed with query "insert into test_cart (product_id,owner_session) select ?,? where not exists (select 1 from test_cart where product_id =? and owner_session=?)" with args [0, 1, 0, 1]
org.postgresql.util.PSQLException: ERROR: insert or update on table "test_cart" violates foreign key constraint "test_cart_product_id_fkey"
  Detail: Key (product_id)=(0) is not present in table "products".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2477)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2190)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:300)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:428)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:354)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:169)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:136)
	at webshop.persistence.pgdb.QueryHelper.doInsert(QueryHelper.java:231)
	at webshop.persistence.pgdb.QueryHelper.doInsert(QueryHelper.java:209)
	at webshop.persistence.pgdb.PGDBProductContainer.merge(PGDBProductContainer.java:156)
	at webshop.persistence.pgdb.PGDBProductContainer.merge(PGDBProductContainer.java:113)
	at webshop.persistence.pgdb.PGDBInvoiceMapperTest.setUp(PGDBInvoiceMapperTest.java:63)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)

]]></system-err>
  </testcase>
  <testcase name="testGetInvoiceIDs" classname="webshop.persistence.pgdb.PGDBInvoiceMapperTest" time="0.006">
    <error message="doInsert failed with query &quot;insert into test_cart (product_id,owner_session) select ?,? where not exists (select 1 from test_cart where product_id =? and owner_session=?)&quot; with args [0, 1, 0, 1]" type="webshop.persistence.PersistenceException">webshop.persistence.PersistenceException: doInsert failed with query "insert into test_cart (product_id,owner_session) select ?,? where not exists (select 1 from test_cart where product_id =? and owner_session=?)" with args [0, 1, 0, 1]
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2477)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2190)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:300)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:428)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:354)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:169)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:136)
	at webshop.persistence.pgdb.QueryHelper.doInsert(QueryHelper.java:231)
	at webshop.persistence.pgdb.QueryHelper.doInsert(QueryHelper.java:209)
	at webshop.persistence.pgdb.PGDBProductContainer.merge(PGDBProductContainer.java:156)
	at webshop.persistence.pgdb.PGDBProductContainer.merge(PGDBProductContainer.java:113)
	at webshop.persistence.pgdb.PGDBInvoiceMapperTest.setUp(PGDBInvoiceMapperTest.java:63)
</error>
    <system-err><![CDATA[Nov 08, 2017 4:00:57 PM webshop.persistence.pgdb.QueryHelper doInsert
SEVERE: doInsert failed with query "insert into test_cart (product_id,owner_session) select ?,? where not exists (select 1 from test_cart where product_id =? and owner_session=?)" with args [0, 1, 0, 1]
org.postgresql.util.PSQLException: ERROR: insert or update on table "test_cart" violates foreign key constraint "test_cart_product_id_fkey"
  Detail: Key (product_id)=(0) is not present in table "products".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2477)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2190)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:300)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:428)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:354)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:169)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:136)
	at webshop.persistence.pgdb.QueryHelper.doInsert(QueryHelper.java:231)
	at webshop.persistence.pgdb.QueryHelper.doInsert(QueryHelper.java:209)
	at webshop.persistence.pgdb.PGDBProductContainer.merge(PGDBProductContainer.java:156)
	at webshop.persistence.pgdb.PGDBProductContainer.merge(PGDBProductContainer.java:113)
	at webshop.persistence.pgdb.PGDBInvoiceMapperTest.setUp(PGDBInvoiceMapperTest.java:63)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)

]]></system-err>
  </testcase>
  <testcase name="testGetInvoiceTableName" classname="webshop.persistence.pgdb.PGDBInvoiceMapperTest" time="0.006">
    <error message="doInsert failed with query &quot;insert into test_cart (product_id,owner_session) select ?,? where not exists (select 1 from test_cart where product_id =? and owner_session=?)&quot; with args [0, 1, 0, 1]" type="webshop.persistence.PersistenceException">webshop.persistence.PersistenceException: doInsert failed with query "insert into test_cart (product_id,owner_session) select ?,? where not exists (select 1 from test_cart where product_id =? and owner_session=?)" with args [0, 1, 0, 1]
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2477)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2190)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:300)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:428)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:354)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:169)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:136)
	at webshop.persistence.pgdb.QueryHelper.doInsert(QueryHelper.java:231)
	at webshop.persistence.pgdb.QueryHelper.doInsert(QueryHelper.java:209)
	at webshop.persistence.pgdb.PGDBProductContainer.merge(PGDBProductContainer.java:156)
	at webshop.persistence.pgdb.PGDBProductContainer.merge(PGDBProductContainer.java:113)
	at webshop.persistence.pgdb.PGDBInvoiceMapperTest.setUp(PGDBInvoiceMapperTest.java:63)
</error>
    <system-err><![CDATA[Nov 08, 2017 4:00:57 PM webshop.persistence.pgdb.QueryHelper doInsert
SEVERE: doInsert failed with query "insert into test_cart (product_id,owner_session) select ?,? where not exists (select 1 from test_cart where product_id =? and owner_session=?)" with args [0, 1, 0, 1]
org.postgresql.util.PSQLException: ERROR: insert or update on table "test_cart" violates foreign key constraint "test_cart_product_id_fkey"
  Detail: Key (product_id)=(0) is not present in table "products".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2477)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2190)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:300)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:428)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:354)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:169)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:136)
	at webshop.persistence.pgdb.QueryHelper.doInsert(QueryHelper.java:231)
	at webshop.persistence.pgdb.QueryHelper.doInsert(QueryHelper.java:209)
	at webshop.persistence.pgdb.PGDBProductContainer.merge(PGDBProductContainer.java:156)
	at webshop.persistence.pgdb.PGDBProductContainer.merge(PGDBProductContainer.java:113)
	at webshop.persistence.pgdb.PGDBInvoiceMapperTest.setUp(PGDBInvoiceMapperTest.java:63)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)

]]></system-err>
  </testcase>
  <testcase name="testGetInvoiceLineTableName" classname="webshop.persistence.pgdb.PGDBInvoiceMapperTest" time="0.008">
    <error message="doInsert failed with query &quot;insert into test_cart (product_id,owner_session) select ?,? where not exists (select 1 from test_cart where product_id =? and owner_session=?)&quot; with args [0, 1, 0, 1]" type="webshop.persistence.PersistenceException">webshop.persistence.PersistenceException: doInsert failed with query "insert into test_cart (product_id,owner_session) select ?,? where not exists (select 1 from test_cart where product_id =? and owner_session=?)" with args [0, 1, 0, 1]
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2477)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2190)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:300)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:428)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:354)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:169)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:136)
	at webshop.persistence.pgdb.QueryHelper.doInsert(QueryHelper.java:231)
	at webshop.persistence.pgdb.QueryHelper.doInsert(QueryHelper.java:209)
	at webshop.persistence.pgdb.PGDBProductContainer.merge(PGDBProductContainer.java:156)
	at webshop.persistence.pgdb.PGDBProductContainer.merge(PGDBProductContainer.java:113)
	at webshop.persistence.pgdb.PGDBInvoiceMapperTest.setUp(PGDBInvoiceMapperTest.java:63)
</error>
    <system-err><![CDATA[Nov 08, 2017 4:00:57 PM webshop.persistence.pgdb.QueryHelper doInsert
SEVERE: doInsert failed with query "insert into test_cart (product_id,owner_session) select ?,? where not exists (select 1 from test_cart where product_id =? and owner_session=?)" with args [0, 1, 0, 1]
org.postgresql.util.PSQLException: ERROR: insert or update on table "test_cart" violates foreign key constraint "test_cart_product_id_fkey"
  Detail: Key (product_id)=(0) is not present in table "products".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2477)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2190)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:300)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:428)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:354)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:169)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:136)
	at webshop.persistence.pgdb.QueryHelper.doInsert(QueryHelper.java:231)
	at webshop.persistence.pgdb.QueryHelper.doInsert(QueryHelper.java:209)
	at webshop.persistence.pgdb.PGDBProductContainer.merge(PGDBProductContainer.java:156)
	at webshop.persistence.pgdb.PGDBProductContainer.merge(PGDBProductContainer.java:113)
	at webshop.persistence.pgdb.PGDBInvoiceMapperTest.setUp(PGDBInvoiceMapperTest.java:63)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)

]]></system-err>
  </testcase>
</testsuite>